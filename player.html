<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Audio Book</title>

  <style>
    body {
      margin: 0;
      background: #0a0f1f;
      font-family: Arial, sans-serif;
    }

    #back {
      position: fixed;
      top: 20px;
      left: 20px;
      background: #00eaff;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      color: #000;
      box-shadow: 0 0 12px #00eaff;
      transition: 0.2s;
      z-index: 9999;
    }

    #open {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 15px 25px;
      background: #00eaff;
      color: #000;
      font-size: 1.2rem;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 0 20px #00eaff;
    }
  </style>
</head>
<body>

<div id="back" onclick="history.back()">‚Üê Back</div>

<button id="open" onclick="openGame()">Open Game</button>

<script>
function openGame() {
  const params = new URLSearchParams(window.location.search);
  const gameURL = params.get("game");
  if (!gameURL) return;

  // Open popup window
  const win = window.open("", "_blank");

  // Clean blank page
  win.document.body.style.margin = "0";
  win.document.body.style.padding = "0";
  win.document.documentElement.style.margin = "0";
  win.document.documentElement.style.padding = "0";

  // Fix viewport on iPad
  const meta = win.document.createElement("meta");
  meta.name = "viewport";
  meta.content = "width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover";
  win.document.head.appendChild(meta);

  // Create iframe
  const iframe = win.document.createElement("iframe");
  iframe.src = gameURL;

  // Perfect scaling on ALL devices
  iframe.style.position = "fixed";
  iframe.style.top = "0";
  iframe.style.left = "0";
  iframe.style.width = "100vw";
  iframe.style.height = "100vh";
  iframe.style.border = "none";

  // Prevent Safari zoom/crop
  iframe.style.transform = "translateZ(0)";
  iframe.style.webkitTransform = "translateZ(0)";

  // Append iframe
  win.document.body.appendChild(iframe);

  // Stealth title
  win.document.title = "Audio Book";
}
</script>

</body>
</html>
